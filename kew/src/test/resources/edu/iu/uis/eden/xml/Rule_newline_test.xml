<?xml version="1.0" encoding="UTF-8"?>

<data xmlns="ns:workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="ns:workflow resource:WorkflowData">
	<documentTypes xmlns="ns:workflow/DocumentType" xsi:schemaLocation="ns:workflow/DocumentType resource:DocumentType">
		<documentType>
			<name>KualiMaintenanceDocument</name>
			<description>KualiMaintenanceDocument</description>
			<label>KualiMaintenanceDocument</label>
			<postProcessorName>edu.iu.uis.eden.postprocessor.DefaultPostProcessor</postProcessorName>
			<docHandler>_blank</docHandler>
			<!--  below will make the parser blow chunks if white space is not handled correctly -->
			<superUserWorkgroupName>TestWorkgroup</superUserWorkgroupName>
			<blanketApproveWorkgroupName>TestWorkgroup</blanketApproveWorkgroupName>
			<active>true</active>
			<routePaths>
				<routePath>
					<start name="AdHoc" />
				</routePath>
			</routePaths>
			<routeNodes>
				<start name="AdHoc">
					<exceptionWorkgroupName>TestWorkgroup</exceptionWorkgroupName>
					<activationType>P</activationType>
				</start>
			</routeNodes>
		</documentType>
	</documentTypes>

     <ruleAttributes xmlns="ns:workflow/RuleAttribute" xsi:schemaLocation="ns:workflow/RuleAttribute resource:RuleAttribute">
				
		<ruleAttribute>
			<name>KualiOrgReviewAttribute</name>
			<className>edu.iu.uis.eden.routetemplate.xmlrouting.StandardGenericXMLRuleAttribute</className>
			<label>KualiOrgReviewAttribute</label>
			<description>KualiOrgReviewAttribute</description>
			<type>RuleXmlAttribute</type>
			<routingConfig>
				<fieldDef name="testAttr" title="testAttr" workflowType="RULE">
					<display>
						<type>text</type>
					</display>
					<!-- enforce attrib-level validation -->
					<validation required="false" />
					<fieldEvaluation>
						<xpathexpression>normalize-space(substring-before(//testAttr, ' ')) = wf:ruledata('testAttr')</xpathexpression>
					</fieldEvaluation>
				</fieldDef>
				<xmlDocumentContent>
					<department>%testAttr%</department>
				</xmlDocumentContent>
			</routingConfig>
		</ruleAttribute>
		

	</ruleAttributes>
	
  <ruleTemplates xmlns="ns:workflow/RuleTemplate"
                 xsi:schemaLocation="ns:workflow/RuleTemplate resource:RuleTemplate">

    <ruleTemplate allowOverwrite="ture">
      <name>KualiOrgReviewTemplate</name>
      <description>KualiOrgReviewTemplate</description>
      <attributes>
        <attribute>
          <name>KualiOrgReviewAttribute</name>
          <required>false</required>
        </attribute>
      </attributes>
    </ruleTemplate>
  </ruleTemplates>

	<rules xmlns="ns:workflow/Rule" xsi:schemaLocation="ns:workflow/Rule resource:Rule">
		<rule>
			<documentType>
				KualiMaintenanceDocument
			</documentType>
			<ruleTemplate>
				KualiOrgReviewTemplate</ruleTemplate>
			<description>org rule</description>
			<ignorePrevious>false</ignorePrevious>
			<ruleExtensions>
				<ruleExtension>
					<attribute>
					KualiOrgReviewAttribute </attribute>
					<ruleTemplate> KualiOrgReviewTemplate 
					</ruleTemplate>
					<ruleExtensionValues>
						<ruleExtensionValue>
							<key>fin_coa_cd</key>
							<value>KU</value>
						</ruleExtensionValue>
						<ruleExtensionValue>
							<key>org_cd</key>
							<value>KOOL</value>
						</ruleExtensionValue>
					</ruleExtensionValues>
				</ruleExtension>
			</ruleExtensions>
			<responsibilities>
				<responsibility>
					<user> bmcgough
					 </user>
					<actionRequested>A</actionRequested>
					<priority>1</priority>
				</responsibility>
			</responsibilities>
		</rule>
	</rules>
</data>